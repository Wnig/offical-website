<template>
    <div class="rotating-earth">
        <div class="cont">
            <div id="canvas" class="earth">
                <iframe src="../src/static/earth.html" frameborder="0"></iframe>
            </div>
            <div class="cont_">
                <div class="conts">
                    <h1 class="title">集团发展历程</h1>
                    <div class="list_callback">  
                        <div class="list-bor"></div>
                        <div class="list_time" id="list_times"> 
                            <div class="pre-btn">
                                <div class="btn-con">
                                    <i></i>
                                    <span>BACK</span>
                                </div>
                            </div>
                            <div class="next-btn">
                                <div class="btn-con">
                                    <i></i>
                                    <span>NEXT</span>
                                </div>
                            </div>
                            <ul id="list_call">    
                                <li class="list_time1">
                                    <div class="list-con">
                                        <h4>2012年11月</h4>
                                        <p>组建WNIG初创团队</p>
                                    </div>
                                </li>    
                                <li class="list_time2"> 
                                    <div class="list-con">
                                        <h4>2013年2月</h4>
                                        <p>成立WNIG集团首个<br/>科技公司</p>
                                    </div>
                                </li>    
                                <li class="list_time3">
                                    <div class="list-con">
                                        <h4>2014年</h4>
                                        <p>软件开发中心成立</p>
                                    </div>
                                </li>    
                                <li class="list_time4">
                                    <div class="list-con">
                                        <h4>2015年</h4>
                                        <p>众创空间成立</p>
                                    </div>
                                </li>    
                                <li class="list_time5"> 
                                    <div class="list-con">
                                        <h4>2016年5月</h4>
                                        <p>WNIG品牌重组</p>
                                    </div>
                                </li>    
                                <li class="list_time6">
                                    <div class="list-con">
                                        <h4>2016年5月</h4>
                                        <p>成立WNIG（厦门）<br/>信息技术有限公司</p>
                                    </div>
                                </li>    
                                <li class="list_time6">
                                    <div class="list-con">
                                        <h4>2016年10月</h4>
                                        <p>xx投资入股<br/>WNIG科技</p>
                                    </div>
                                </li>    
                                <li class="list_time6">
                                    <div class="list-con">
                                        <h4>2016年11月</h4>
                                        <p>WNIG正式成为<br/>腾讯云技术服务商</p>
                                    </div>
                                </li>
                                <li class="list_time6">
                                    <div class="list-con">
                                        <h4>2016年12月</h4>
                                        <p>成立xx（深圳）<br/>科技有限公司</p>
                                    </div>
                                </li>
                                <li class="list_time6">
                                    <div class="list-con">
                                        <h4>2017年1月</h4>
                                        <p>成立厦门xx健康<br/>管理有限公司</p>
                                    </div>
                                </li>
                                <li class="list_time6">
                                    <div class="list-con">
                                        <h4>2017年2月</h4>
                                        <p>成立厦门xx<br/>生物科技有限公司</p>
                                    </div>
                                </li>
                                <li class="list_time6">
                                    <div class="list-con">
                                        <h4>2017年7月</h4>
                                        <p>成立xx（厦门）<br/>网络科技有限公司</p>
                                    </div>
                                </li>
                                <li class="list_time6">
                                    <div class="list-con">
                                        <h4>2017年8月</h4>
                                        <p>WNIG与乌镇成立合资公司</p>
                                    </div>
                                </li>
                                <li class="list_time6">
                                    <div class="list-con">
                                        <h4>2017年10月</h4>
                                        <p>成立xx科技有限公司</p>
                                    </div>
                                </li>
                                <li class="list_time6">
                                    <div class="list-con">
                                        <h4>2017年11月</h4>
                                        <p>WNIG集团成立</p>
                                    </div>
                                </li>
                                <li class="list_time6">
                                    <div class="list-con">
                                        <h4>2017年11月</h4>
                                        <p>xx“xx小镇”平台上线</p>
                                    </div>
                                </li>
                                <li class="list_time6">
                                    <div class="list-con">
                                        <h4>2018年1月</h4>
                                        <p>“xxx”产业互联网+<br/>全渠道电商平台上线</p>
                                    </div>
                                </li>
                                <li class="list_time6">
                                    <div class="list-con">
                                        <h4>2018年1月</h4>
                                        <p>扶贫助农新平台<br/>“xx”项目启动</p>
                                    </div>
                                </li>
                                <li class="list_time6">
                                    <div class="list-con">
                                        <h4>2018年1月</h4>
                                        <p>成立xx（厦门）<br/>策划设计有限公司</p>
                                    </div>
                                </li>
                                <li class="list_time6">
                                    <div class="list-con">
                                        <h4>2018年2月</h4>
                                        <p>xx”物联网+智能<br/>净水平台上线</p>
                                    </div>
                                </li>
                                <li class="list_time6">
                                    <div class="list-con">
                                        <h4>2018年2月</h4>
                                        <p>成立厦门xx网<br/>络科技有限公司</p>
                                    </div>
                                </li>
                                <li class="list_time6">
                                    <div class="list-con">
                                        <h4>2018年2月</h4>
                                        <p>“xxx”地图数据平台上线</p>
                                    </div>
                                </li>
                                <li class="list_time6">
                                    <div class="list-con">
                                        <h4>2018年4月</h4>
                                        <p>成立WNIG（厦门）文<br/>化传媒有限公司</p>
                                    </div>
                                </li>
                                <li class="list_time6">
                                    <div class="list-con">
                                        <h4>2018年4月</h4>
                                        <p>“xx”顺风车速递<br/>服务平台上线</p>
                                    </div>
                                </li>
                                <li class="list_time6">
                                    <div class="list-con">
                                        <h4>2018年4月</h4>
                                        <p>公寓综合管理系统<br/>“xxx”项目启动</p>
                                    </div>
                                </li>									
                                <li class="list_time6">
                                    <div class="list-con">
                                        <h4>2018年4月</h4>
                                        <p>社交旅游电商平台<br/>“xx”项目启动</p>
                                    </div>
                                </li>
                                <li class="list_time6">
                                    <div class="list-con">
                                        <h4>2018年5月</h4>
                                        <p>“xx”社交旅游<br/>电商平台上线</p>
                                    </div>
                                </li>

                                <li class="list_time8">
                                    <div class="list-con">
                                        <h4>2018年5月</h4>
                                        <p>成立WNIG(厦门)<br/>电子商务有限公司</p>
                                    </div>
                                </li>
                                <li class="list_time8">
                                    <div class="list-con">
                                        <h4>2018年7月</h4>
                                        <p>WNIG（厦门）影视制作<br/>有限公司正式更名</p>
                                    </div>
                                </li>
                                <li class="list_time8">
                                    <div class="list-con">
                                        <h4>2018年8月</h4>
                                        <p>“xx”旅游新生<br/>态系统平台上线</p>
                                    </div>
                                </li>
                                <li class="list_time8">
                                    <div class="list-con">
                                        <h4>2018年9月</h4>
                                        <p>“xx”平台正式上线</p>
                                    </div>
                                </li>
                                <li class="list_time8">
                                    <div class="list-con">
                                        <h4>2018年9月</h4>
                                        <p>成立厦门市xx<br/>商务有限公司</p>
                                    </div>
                                </li>
                                <li class="list_time8">
                                    <div class="list-con">
                                        <h4>2018年9月</h4>
                                        <p>“xx”教育区块链<br/>系统平台上线</p>
                                    </div>
                                </li>
                                <li class="list_time8">
                                    <div class="list-con">
                                        <h4>2018年10月</h4>
                                        <p>成立xx（厦门）商<br/>务服务有限公司</p>
                                    </div>
                                </li>
                                <li class="list_time8">
                                    <div class="list-con">
                                        <h4>2018年10月</h4>
                                        <p>“xx”777音乐盛典全<br/>球发布会圆满成功</p>
                                    </div>
                                </li>
                            </ul>    
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <FooterItem01 ref="footerItem01"></FooterItem01>
    </div>
		  	
</template>

<script setup lang="ts">
import FooterItem01 from './footerItem01.vue';
import { onMounted } from 'vue'

onMounted(() => {
    // arcSlip('list_time')
    arcSlip('list_times')
    window.addEventListener('resize', ()=> {
        window.location.reload()
    })
})

//第五屏q切换效果
const arcSlip = (eleId)=> {
    const oPic = document.getElementById(eleId)
    const oPrev = getByClass(oPic,'pre-btn')[0]
    const oNext = getByClass(oPic,'next-btn')[0]
    const aLi = oPic.getElementsByTagName('li')
    let arr = []
    for(let i = 0; i < aLi.length; i++) {
        arr.push([parseInt(getStyle(aLi[i],'left')), parseInt(getStyle(aLi[i],'top'))])
    }
    oPrev.onclick = function moveTP() {
        arr.push(arr[0]);
        arr.shift();
        for(var i = 0;i < aLi.length; i++) {
            startMove(aLi[i], {left:arr[i][0], top:arr[i][1]});
        }
    }
    oNext.onclick=function moveTN() {
        arr.unshift(arr[arr.length-1]);
        arr.pop();
        for(let i = 0;i < aLi.length; i++) {
            startMove(aLi[i], {left:arr[i][0],top:arr[i][1]});
        }
    }
    const moveTime = setInterval (function() {
        oNext.click()
    }, 2000);

    
} 
const getStyle = (obj, name)=> {
    if(obj.currentStyle) { 
        return obj.currentStyle[name]; 
    } else { 
        return getComputedStyle(obj,false)[name]
    }
}
const getByClass = (oParent, sClass)=> {
    let aResult = []
    let aEle = oParent.getElementsByTagName('*')
    for(let i = 0; i < aEle.length; i++) {
        if(aEle[i].className == sClass) {
            aResult.push(aEle[i])
        }
    }
    return aResult
}

const startMove = (obj, json, fnEnd)=> {
    clearInterval(obj.timer)
    obj.timer = setInterval(function() {
        let bStop = true
        for(let attr in json) {	
            let cur = 0
            cur = parseInt(getStyle(obj,attr))
            let speed = (json[attr] - cur)
            speed = speed > 0 ? Math.ceil(speed) : Math.floor(speed)
            if(cur != json[attr]) bStop = false
                obj.style[attr] = cur + speed +'px'
        }
        if(bStop) {
            clearInterval(obj.timer)
            if(fnEnd) fnEnd()
        }
    }, 30)
}

</script>

<style scoped lang="scss">
.rotating-earth {
    position: relative;
    width: 100%;
    height: 100vh;
    overflow: hidden;
    .title {
		position: relative;
		margin-top: 13.8vh;
	    color: #fff;
	    text-align: center;
	    font-size: 18px;
	    font-family: 'PingFangSC-Semibold';
        font-weight: bold;
        &:after {
            bottom: -12px;
            left: 0;
            right: 0;
            margin: 0 auto;
        }
	}
	.cont {
		position: relative;
		display: flex;
		justify-content: center;
		align-items: center;
        width: 100%;
		height: 86.94vh;
		overflow: hidden;
		background: #000;
	}
	#canvas {
		position: absolute;
		left: 0;
		right: 0;
		bottom: -50%;
		margin: 0 auto;
		width: 100%;
		height: 120%;
		z-index: 1;
		opacity: 0.6;
        iframe {
            width: 100%;
            height: 100%;
        }
	}
	.cont_ {
		display: flex;
		justify-content: center;
		align-items: center;
		position: absolute;
		left: 0;
		top: 0;
		width: 100%;
		height: 100%;
		z-index: 3;
	}
	.conts {
		width: 100%;
	}
    .pre-btn {
		position: absolute;
		left: 8.07vw;
		top: 0;
		display: flex;
		justify-content: center;
		align-items: center;
		color: #FFFFFF;
		font-size: 1.04vw;
		font-family: 'PingFangSC-Regular';
        font-weight: bold;
		z-index: 100;
		cursor: pointer;
		opacity: 0.4;
		-webkit-transition: all .8s;
    	transition: all .8s;
        i {
            display: block;
            width: 2.55vw;
            height: 2.55vw;
            margin: 0 auto 1.85vh;
            background: url('@/assets/images/template01/14.svg') center center no-repeat;
            background-size: 100% 100%;
        }
	}
	.next-btn {
		position: absolute;
		right: 8.07vw;
		top: 0;
		display: flex;
		justify-content: center;
		align-items: center;
		color: #FFFFFF;
		font-size: 1.04vw;
		font-family: 'PingFangSC-Regular';
        font-weight: bold;
		z-index: 100;
		cursor: pointer;
		opacity: 0.4;
		-webkit-transition: all .8s;
    	transition: all .8s;
        i {
            display: block;
            width: 2.55vw;
            height: 2.55vw;
            margin: 0 auto 1.85vh;
            background: url('@/assets/images/template01/15.svg') center center no-repeat;
            background-size: 100% 100%;
        }
	}
	
	.list_callback {
		position: relative;
		overflow: hidden;
		width: 100%;
		height: 54vh;
		margin-top: 14vh;
	}
	.list-bor {
		position: absolute;
		left: -37.5vw;
		top: 10.5vw;
		width: 174vw;
		height: 174vw;
		border-radius: 50%;
		border: 0.16vw solid #757575;
		z-index: 50;
	}
	.list_time {
        li {
            position: absolute;
            display: flex;
            justify-content: center;
            align-items: center;
            width: 12.4vw;
            height: 12.4vw;
            border-radius: 50%;
            background: #FAFAFA;
            z-index: 99;
            cursor: pointer;
            -webkit-transition: all .8s;
            transition: all .8s;
        }
        h4 {
            margin-bottom: 0.83vh;
            color: #5CBADF;
            text-align: center;
            font-size: 1.56vw;
            font-family: 'PingFangSC-Semibold';
        }
        p {
            color: #000000;
            text-align: center;
            font-size: 0.94vw;
            font-family: 'PingFangSC-Light';
        }
    }
	.list_time1 {
		left: 8vw;
		top: 22vh;
	}
	.list_time2 {
		left: 25vw;
		top: 12vh;
	}
	.list_time3 {
		left: 44vw;
		top: 6vh;
	}
	.list_time4 {
		left: 62vw;
		top: 12vh;
	}
	.list_time5 {
		left: 80vw;
		top: 22vh;
	}
	.list_time6 {
		left: 120vw;
		top: 70vh;
	}
	.list_time7 {
		left: 50vw;
		top: 30vh;
	}
	.list_time8 {
		left: -20vw;
		top: 70vh;
	}
}
</style>